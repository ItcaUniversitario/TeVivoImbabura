<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Te Vivo Imbabura</title>

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <div class="zona-logo izquierda">
            <img src="assets/imagenes/logounesco.png" alt="UNESCO" class="img-responsive">
        </div>

        <div class="zona-logo centro">
            <img src="assets/imagenes/banner_tvi.png" alt="Te Vivo Imbabura" class="img-responsive">
        </div>

        <div class="zona-logo derecha">
            <img src="assets/imagenes/logoitca.png" alt="ITCA" class="img-responsive">
        </div>
    </header>

    <main>
        <section id="panel-izquierdo" class="panel">
            <h3 style="color: var(--color-bosque-profundo); margin-bottom: 15px; text-align: center;">
                ğŸ† Marcador Global
            </h3>

            <div class="jugador-score-item"
                style="font-weight: bold; border-bottom: 2px solid var(--color-bosque-profundo); margin-bottom: 5px; padding-bottom: 5px; display: flex; justify-content: space-between;">
                <span style="color: var(--color-bosque-profundo);">Nombre</span>
                <span style="color: var(--color-bosque-profundo);">Puntaje</span>
            </div>

            <div id="lista-jugadores-score">
            </div>
        </section>
        <section id="tablero-central" class="panel">

            <div id="pantalla-jugadores" class="menu-seleccion">
                <h2>ğŸ‘¥ Â¿CuÃ¡ntos van a jugar?</h2>

                <div class="grid-jugadores">
                    <button class="btn-jugador" onclick="iniciarJuego(1)">
                        <svg class="icono-jugador" viewBox="0 0 24 24" width="40" height="40" fill="currentColor">
                            <path
                                d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                        </svg>
                        <span class="texto-jugador">1</span>
                    </button>

                    <button class="btn-jugador" onclick="iniciarJuego(2)">
                        <svg class="icono-jugador" viewBox="0 0 24 24" width="40" height="40" fill="currentColor">
                            <path
                                d="M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9 0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57 3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z" />
                        </svg>
                        <span class="texto-jugador">2</span>
                    </button>

                    <button class="btn-jugador" onclick="iniciarJuego(3)">
                        <svg class="icono-jugador" viewBox="0 0 24 24" width="40" height="40" fill="currentColor">
                            <path
                                d="M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87zM15 12c1.66 0 2.99-1.34 2.99-3S16.66 6 15 6c-1.66 0-2.99 1.34-2.99 3S13.34 12 15 12zm-8-2c1.66 0 2.99-1.34 2.99-3S8.66 4 7 4C5.34 4 4 5.34 4 7s1.34 3 3 3zm0 3.13c-2.76.4-6.33 1.69-6.33 3.87v3h4v-3c0-1.68.96-2.94 2.33-3.87zM7.53 14h8.93C15.16 13.23 13.5 12.9 12 12.9c-1.5 0-3.16.33-4.47 1.1z" />
                        </svg>
                        <span class="texto-jugador">3</span>
                    </button>
                </div>


                <div class="area-qr">
                    <div class="linea-divisoria"></div>
                    <p class="titulo-qr">ğŸ“± Descarga la App <strong>ITCA ACADEMY</strong></p>
                    <img src="assets/imagenes/qr_app.png" alt="QR Descarga" class="img-qr">
                </div>
                <button class="btn-admin" onclick="accesoAdmin()">
                    âš™ï¸ Admin
                </button>
            </div>


            <div id="pantalla-registro" class="menu-seleccion" style="display: none;">
                <h2>ğŸ“ Registro de Viajeros</h2>
                <p class="subtitulo">Ingresen sus nombres para comenzar</p>

                <div id="contenedor-inputs"></div>

                <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center;">
                    <button class="btn-imbabura secundario" onclick="volverSeleccion()">
                        â¬… AtrÃ¡s
                    </button>

                    <button class="btn-imbabura primario" onclick="iniciarTablero()">
                        Â¡A JUGAR! ğŸš€
                    </button>
                </div>
            </div>
            <!-- === PANTALLA DE VIDEO DE INTRODUCCIÃ“N === -->
            <div id="pantalla-video" class="menu-seleccion" style="display: none;">
                <h2>ğŸ¬ IntroducciÃ³n al Viaje</h2>

                <!-- 1. Contenedor del video -->
                <div class="video-container">
                    <video id="video-intro" src="assets/video/intro_biblioteca.mp4" controls width="100%" height="100%"
                        style="border-radius: 12px; display: block;"></video>
                </div>

                <!-- DEBE TENER EL ID y NO tener un onclick que pelee con el JS -->
                <button id="btn-saltar-video" class="btn-imbabura primario" style="margin-top: 30px;">
                    Saltar / Continuar â–¶
                </button>
            </div>
            <!-- === NUEVO: SELECCIÃ“N DE PERSONAJE === -->
            <div id="pantalla-personaje" class="menu-seleccion" style="display: none;">
                <h2 id="titulo-seleccion">ğŸ‘¤ Jugador 1: Elige tu ficha</h2>
                <p class="subtitulo">Elige sabiamente, esta ficha te representarÃ¡ en el viaje.</p>

                <!-- GRILLA DE 6 FICHAS -->
                <div class="grid-fichas">
                    <!-- Las fichas se generan con botones para ser accesibles -->
                    <button class="btn-ficha" onclick="seleccionarFicha(1)" id="ficha-1">
                        <img src="assets/fichas/ficha_1.png" alt="Ficha 1">
                    </button>
                    <button class="btn-ficha" onclick="seleccionarFicha(2)" id="ficha-2">
                        <img src="assets/fichas/ficha_2.png" alt="Ficha 2">
                    </button>
                    <button class="btn-ficha" onclick="seleccionarFicha(3)" id="ficha-3">
                        <img src="assets/fichas/ficha_3.png" alt="Ficha 3">
                    </button>
                    <button class="btn-ficha" onclick="seleccionarFicha(4)" id="ficha-4">
                        <img src="assets/fichas/ficha_4.png" alt="Ficha 4">
                    </button>
                    <button class="btn-ficha" onclick="seleccionarFicha(6)" id="ficha-6">
                        <img src="assets/fichas/ficha_6.png" alt="Ficha 6">
                    </button>
                    <button class="btn-ficha" onclick="seleccionarFicha(5)" id="ficha-5">
                        <img src="assets/fichas/ficha_5.png" alt="Ficha 5">
                    </button>

                </div>
            </div>
            <div id="pantalla-interstitial" style="display: none;" class="menu-seleccion">
                <div class="interstitial-contenido">
                    <h2>Cargando Aventura...</h2>
                    <img id="imagen-interstitial" src="assets/imagenes/mapanivel1.png" alt="Cargando nivel"
                        class="img-transicion">
                    <div class="barra-carga"></div>
                </div>
            </div>
            <div id="pantalla-niveles" class="menu-seleccion" style="display: none;">
                <h2>ğŸ—ºï¸ Selecciona tu Aventura</h2>
                <p class="subtitulo">Supera cada etapa para desbloquear la siguiente</p>

                <div class="grid-niveles">

                    <div class="card-nivel activo" onclick="cargarNivel(1)">
                        <div class="nivel-numero">1</div>
                        <div class="nivel-info">
                            <h3>El Comienzo</h3>
                            <span>Turismo y Ciudad ğŸ™ï¸</span>
                        </div>
                        <div class="nivel-accion">â–¶</div>
                    </div>

                    <div class="card-nivel bloqueado" onclick="cargarNivel(2)">
                        <div class="nivel-numero">2</div>
                        <div class="nivel-info">
                            <h3>Ruta Ancestral</h3>
                            <span>Historia y Cultura ğŸº</span>
                        </div>
                        <div class="nivel-accion">ğŸ”’</div>
                    </div>

                    <div class="card-nivel bloqueado" onclick="cargarNivel(3)">
                        <div class="nivel-numero">3</div>
                        <div class="nivel-info">
                            <h3>Tierra de Gigantes</h3>
                            <span>Naturaleza Extrema ğŸŒ‹</span>
                        </div>
                        <div class="nivel-accion">ğŸ”’</div>
                    </div>

                    <div class="card-nivel bloqueado" onclick="cargarNivel(4)">
                        <div class="nivel-numero">4</div>
                        <div class="nivel-info">
                            <h3>CorazÃ³n del Taita</h3>
                            <span>El Gran Reto Final ğŸ†</span>
                        </div>
                        <div class="nivel-accion">ğŸ”’</div>
                    </div>

                </div>
            </div>
            <div id="contenedor-mapa" style="display: none;">
                <div id="tablero-visual-juego">
                    <img id="mapa-juego-visual" src="assets/imagenes/mapa_imbabura.png" alt="Mapa Completo del Juego">

                    <div id="contenedor-fichas">
                    </div>

                    <div id="resultado-dado-display" style="display: none;">
                        <div id="dado-cubo" class="rodando">
                            <div class="cara cara-1"><img src="assets/dado/dado1.png" alt="Cara 1"></div>
                            <div class="cara cara-2"><img src="assets/dado/dado2.png" alt="Cara 2"></div>
                            <div class="cara cara-3"><img src="assets/dado/dado3.png" alt="Cara 3"></div>
                            <div class="cara cara-4"><img src="assets/dado/dado4.png" alt="Cara 4"></div>
                            <div class="cara cara-5"><img src="assets/dado/dado5.png" alt="Cara 5"></div>
                            <div class="cara cara-6"><img src="assets/dado/dado6.png" alt="Cara 6"></div>
                        </div>
                    </div>

                </div>
                <div id="controles-mapa">
                    <div class="info-turno-mapa">
                        <span style="font-size: 0.85rem; color: #666;">Turno de:</span>
                        <strong id="nombre-jugador-turno"
                            style="color: var(--color-bosque-profundo); font-size: 1.1rem;">ESTEFANIA</strong>
                    </div>

                    <button id="boton-dado" class="btn-imbabura primario" onclick="window.tirarDado()">
                        TIRAR DADO
                    </button>
                </div>
            </div>
          <div id="gameModal" class="modal-imbabura">
    <div class="modal-contenido">
        <h2 id="modalTitle"></h2>
        <div class="modal-body-content">
            <img id="modalImage" src="" alt="Lugar emblemÃ¡tico" style="display:none;">
            
            <div id="arMessageContainer"></div> 
            
            <p id="modalDescription"></p>
            <div id="modalOptionsContainer"></div>
        </div>
        <div id="modalButtons" class="modal-footer-botones">
        </div>
    </div>
</div>
            <div id="pantalla-fin-partida" style="
               display: none; 
                position: absolute; 
                top: 0; left: 0; 
                width: 100%; height: 100%; 
                background-color: rgba(0, 0, 0, 0.95); 
                z-index: 9000; 
                color: white; 
                text-align: center; 
                padding-top: 5vh; 
                overflow-y: auto;
                
                /* ğŸ”‘ NUEVA PROPIEDAD PARA CENTRAR HORIZONTALMENTE */
                align-items: center; 
                flex-direction: column; /* Ya lo tenÃ­as, solo para claridad */
                justify-content: center; /* TambiÃ©n ayuda a centrar verticalmente, si lo necesitas */
                ">

                <img id="gif-victoria" src="" alt="GIF de Victoria"
                    style="display: none; max-width: 90%; height: auto; margin: 0 auto;">

                <video id="video-final" width="600" height="338" controls
                    style="display: none; max-width: 90%; border-radius: 8px;"></video>

                <div id="score-final-container" style="display: none; margin-top: 40px; padding: 20px;">
                    <h1 id="titulo-ganador" style="font-size: 2.5em; margin-bottom: 20px; color: #FFD700;"></h1>

                    <div id="resumen-puntuaciones" style="
                        font-size: 1.1em;
                        max-width: 400px;
                        margin: 20px auto;
                        text-align: left;
                        padding: 15px;
                        border-radius: 8px;
                        background-color: rgba(255, 255, 255, 0.1);">
                    </div>

                    <button onclick="window.location.reload()" style="
                        padding: 12px 25px; 
                        margin-top: 30px; 
                        cursor: pointer;
                        font-size: 1.1em;
                        background-color: #4CAF50;
                        color: white;
                        border: none;
                        border-radius: 5px;">
                        Volver a Jugar ğŸš€
                    </button>
                </div>
            </div>
        </section>
        <!-- === PANEL LATERAL DERECHO: SCOREBOARD DE LA PARTIDA (Con PestaÃ±as) === -->
        <section id="panel-derecho" class="panel">

            <!-- PESTAÃ‘AS (TABS) -->
            <div class="tabs-control">
                <button class="tab-button activo" onclick="mostrarPestana('score')">
                    ğŸ“Š Partida
                </button>
                <button class="tab-button" onclick="mostrarPestana('info')">
                    ğŸ“œ Reglas
                </button>
            </div>

            <!-- PESTAÃ‘A 1: SCOREBOARD DE LA PARTIDA (Debe ser un tab-content) -->
            <div id="tab-score" class="tab-content activo">
                <!-- Contenido principal del Scoreboard (RUTA, JUGADORES, BOTONES) -->

                <h3
                    style="color: var(--color-bosque-profundo); margin-top: 10px; margin-bottom: 10px; text-align: center;">
                    <span id="label-nivel">Ruta Nivel 1</span>
                </h3>

                <!-- Marcador DinÃ¡mico de Puntos -->
                <div id="score-partida-container" class="marcador-partida-scroll">
                    <!-- AquÃ­ van los jugadores inyectados por JS -->
                </div>

                <!-- Inventario (ya no existe el bloque grande) -->

                <!-- CONTROLES (Turno y Salir) -->
                <div style="border-top: 1px solid #eee; padding-top: 15px; margin-top: 15px;">

                    <button class="btn-imbabura secundario" style="margin-top: 10px; width: 100%;"
                        onclick="window.location.reload()">
                        Salir de la Partida ğŸšª
                    </button>
                </div>
            </div>
            <!-- ---------------------------------------------------- -->
            <!-- PESTAÃ‘A 2: INFORMACIÃ“N Y REGLAS DEL JUEGO -->
            <!-- ---------------------------------------------------- -->
            <div id="tab-info" class="tab-content">
                <h3
                    style="color: var(--color-bosque-profundo); margin-top: 10px; margin-bottom: 15px; text-align: center;">
                    ğŸ§­ Reglas RÃ¡pidas
                </h3>
                <p style="font-size: 0.9rem; color: #444; margin-bottom: 15px;">
                    Completa la ruta por Imbabura, acumulando el mayor puntaje y recolectando Ã­tems.
                </p>

                <h4 style="margin-top: 15px; color: var(--color-tierra-oscura);">Tipos de Casillas:</h4>

                <ul
                    style="font-size: 0.9rem; padding-left: 0; list-style-type: none; color: #333; line-height: 1.4; /* Espaciado mÃ¡s compacto */">

                    <li style="display: flex; align-items: flex-start; margin-bottom: 15px;">
                        <img src="assets/casillas/lugaremblematico.png" alt="Lugar EmblemÃ¡tico"
                            style="width: 20px; height: 20px; margin-right: 8px; flex-shrink: 0;">
                        <div>
                            <strong style="color: #6C8E28;">Lugar EmblemÃ¡tico:</strong>
                            Parada obligatoria. Ganas puntos e Ã­tem. Si te sobran pasos, Â¡continÃºas!
                        </div>
                    </li>

                    <li style="display: flex; align-items: flex-start; margin-bottom: 15px;">
                        <img src="assets/casillas/pregunta.png" alt="Pregunta / DesafÃ­o"
                            style="width: 20px; height: 20px; margin-right: 8px; flex-shrink: 0;">
                        <div>
                            <strong style="color: #007BFF;">Pregunta / DesafÃ­o:</strong>
                            Respuesta obligatoria.
                            <span style="color: green; font-weight: bold;">(âœ… Ganas puntos)</span>,
                            <span style="color: red; font-weight: bold;">(âŒ Pierdes puntos)</span>.
                        </div>
                    </li>

                    <li style="display: flex; align-items: flex-start; margin-bottom: 15px;">
                        <img src="assets/casillas/datocurioso.png" alt="Dato Curioso"
                            style="width: 20px; height: 20px; margin-right: 8px; flex-shrink: 0;">
                        <div>
                            <strong style="color: #FFC107;">Dato Curioso:</strong>
                            Recompensa automÃ¡tica de puntos y/o un Ã­tem.
                        </div>
                    </li>

                    <li style="display: flex; align-items: flex-start; margin-bottom: 15px;">
                        <img src="assets/casillas/trampa.png" alt="Trampa / Evento"
                            style="width: 20px; height: 20px; margin-right: 8px; flex-shrink: 0;">
                        <div>
                            <strong style="color: #8C0000;">Trampa / Evento:</strong>
                            Puedes retroceder o perder puntos. Los Ã­tems de inventario pueden ayudarte a evitar el
                            castigo.
                        </div>
                    </li>

                    <li style="display: flex; align-items: flex-start; margin-bottom: 15px;">
                        <img src="assets/casillas/casillasegura.png" alt="Camino Sencillo"
                            style="width: 20px; height: 20px; margin-right: 8px; flex-shrink: 0;">
                        <div>
                            <strong style="color: #555;">Camino Sencillo:</strong>
                            Paso de ruta seguro, sin eventos. Cedes el dado al final del movimiento.
                        </div>
                    </li>
                </ul>


            </div>

        </section>
    </main>
    <div id="toast-notification" class="toast">Mensaje de prueba</div>
    <script type="module" src="js/main.js"></script>
</body>

</html>